<<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>MeshCat</title>
	</head>
	<body>
        <div id="meshcat-pane">
        </div>

        <script type="text/javascript" src="main.min.js"></script>
        <script>
            var viewer = new MeshCat.Viewer(document.getElementById("meshcat-pane"));
            try {
                viewer.connect();
                fetch('/data/starling1.stl').then(res => res.arrayBuffer()).then((res) => {
                    viewer.handle_command({
                        type: "set_object",
                        path: "/meshcat/mesh_test",
                        object: {
                            metadata: {version: 4.5, type: "Object"},
                            geometries: [
                                {
                                    uuid: "cef79e52-526d-4263-b595-04fa2705974e",
                                    type: "_meshfile_geometry",
                                    format: "stl",
                                    data: new Uint8Array(res),
                                }
                            ],
                            materials: [{
                                uuid: "396744fe-087d-11ec-9957-7fbbaaa96777",
                                type:  'MeshLambertMaterial',
                                color: 0xffffff, 
                                reflectivity: 0.75, 
                                transparent: true,
                                opacity: 0.75, 
                                linewidth: .25,
                                wireframe: true,
                                wireframeLinewidth: .25,
                                vertexColors: 0
                            }],
                            object: {
                                uuid: "00c2baef-9600-4c6b-b88d-7e82c40e004f",
                                type: "Mesh",
                                geometry: "cef79e52-526d-4263-b595-04fa2705974e",
                                material: "396744fe-087d-11ec-9957-7fbbaaa96777",
                            }
                        }
                    })
                }).catch((e) => console.error(e));
            } catch (e) {
                console.info("Not connected to MeshCat websocket server: ", e);
            }
        </script>


         <style>
            body {
                margin: 0;
            }

            #meshcat-pane {
                width: 100vw;
                height: 100vh;
                overflow: hidden;
            }
        </style>
        <script id="embedded-json"></script>
	</body>
</html>